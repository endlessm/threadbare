[gd_scene load_steps=4 format=3 uid="uid://c1cuy5dif4li5"]

[ext_resource type="SpriteFrames" uid="uid://caou2u7vffhei" path="res://scenes/world_map/components/cat.tres" id="1_pddem"]

[sub_resource type="GDScript" id="GDScript_ckvkc"]
script/source = "extends CharacterBody2D

const LODO_SCENE = preload(\"res://PrototipoLaberinto_de_Fauno/Scenes/Componenst/Lodo.tscn\")
@export var player: CharacterBody2D 

var is_firing_sequence: bool = false 

func disparar_un_lodo() -> void:
	if player == null:
		return

	var lodo_instance:CharacterBody2D = LODO_SCENE.instantiate()
	lodo_instance.global_position = global_position
	
	lodo_instance.start_move(player.global_position) 

	get_parent().add_child(lodo_instance)

func sequence_disparo_doble() -> void:
	if player == null:
		return
		
	if is_firing_sequence:
		return
		
	is_firing_sequence = true
	
	disparar_un_lodo()

	await get_tree().create_timer(0.5).timeout 

	disparar_un_lodo() 
	
	is_firing_sequence = false



func _on_timer_timeout() -> void:
	sequence_disparo_doble()
"

[sub_resource type="CircleShape2D" id="CircleShape2D_5qup2"]
radius = 40.04997

[node name="CharacterBody2D" type="CharacterBody2D"]
collision_layer = 128
script = SubResource("GDScript_ckvkc")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
modulate = Color(1, 0, 0, 1)
sprite_frames = ExtResource("1_pddem")
animation = &"idle"

[node name="Timer" type="Timer" parent="."]
wait_time = 4.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_5qup2")

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
