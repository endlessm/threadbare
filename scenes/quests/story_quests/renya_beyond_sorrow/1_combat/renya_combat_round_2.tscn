[gd_scene load_steps=21 format=4 uid="uid://buvo0sgtr3qeg"]

[ext_resource type="PackedScene" uid="uid://2rbpl811wlv1" path="res://scenes/game_elements/props/background_music/background_music.tscn" id="1_igvqa"]
[ext_resource type="AudioStream" uid="uid://m3utsrhd2bc3" path="res://scenes/quests/story_quests/renya_beyond_sorrow/Complementos/music/7. Silent Longing (Loop).mp3" id="2_ktwuu"]
[ext_resource type="Script" uid="uid://cp54mgi54nywo" path="res://scenes/game_logic/fill_game_logic.gd" id="3_s61i2"]
[ext_resource type="TileSet" uid="uid://dmg13wgcc7so5" path="res://scenes/quests/story_quests/renya_beyond_sorrow/renya_tileset.tres" id="4_kr32a"]
[ext_resource type="PackedScene" uid="uid://crqjcicx0vdu" path="res://scenes/game_elements/props/decoration/bush/bush.tscn" id="5_r7kal"]
[ext_resource type="SpriteFrames" uid="uid://bxe8tg855s145" path="res://scenes/quests/story_quests/renya_beyond_sorrow/1_combat/components/decoration/bush/components/bush_spriteframes_purple_large.tres" id="6_2o143"]
[ext_resource type="PackedScene" uid="uid://lgu7aeqa7o3r" path="res://scenes/game_elements/props/door/door.tscn" id="6_tm1ho"]
[ext_resource type="PackedScene" uid="uid://y7qe2x6saf1n" path="res://scenes/quests/story_quests/renya_beyond_sorrow/1_combat/components/decoration/bush/bush.tscn" id="7_0ow6i"]
[ext_resource type="Script" uid="uid://hqdquinbimce" path="res://scenes/game_elements/props/teleporter/teleporter/components/teleporter.gd" id="7_odyqf"]
[ext_resource type="PackedScene" uid="uid://iu2q66clupc6" path="res://scenes/game_elements/characters/player/player.tscn" id="8_fhg3o"]
[ext_resource type="PackedScene" uid="uid://b82nsrh332syj" path="res://scenes/game_elements/characters/enemies/throwing_enemy/throwing_enemy.tscn" id="10_krssa"]
[ext_resource type="SpriteFrames" uid="uid://oggfoxxcn6ft" path="res://scenes/quests/story_quests/renya_beyond_sorrow/player_components/renya_player_combat.tres" id="11_rqh7d"]
[ext_resource type="SpriteFrames" uid="uid://ci6o3o7ti17l0" path="res://scenes/quests/story_quests/renya_beyond_sorrow/1_combat/enemies_components/negacion_enemy_spriteframes.tres" id="13_xuftb"]
[ext_resource type="SpriteFrames" uid="uid://478kw5lbumtn" path="res://scenes/quests/story_quests/renya_beyond_sorrow/1_combat/enemies_components/projectile_spriteframes.tres" id="16_wnsuw"]
[ext_resource type="SpriteFrames" uid="uid://lt1fwrvd4a5h" path="res://scenes/quests/story_quests/renya_beyond_sorrow/1_combat/relleno/filling_spriteframes.tres" id="18_cbawa"]
[ext_resource type="PackedScene" uid="uid://y8ha8abfyap2" path="res://scenes/game_elements/props/filling_barrel/filling_barrel.tscn" id="20_10usg"]
[ext_resource type="PackedScene" uid="uid://cfcgrfvtn04yp" path="res://scenes/ui_elements/hud/hud.tscn" id="21_4r1d0"]

[sub_resource type="Animation" id="Animation_nlryc"]
resource_name = "goal_completed"
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../OnTheGround/LevelExit/Door Exit")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"open"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_hlahk"]
_data = {
&"goal_completed": SubResource("Animation_nlryc")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_e81yh"]
size = Vector2(101, 49)

[node name="InkCombat" type="Node2D"]

[node name="BackgroundMusic" parent="." instance=ExtResource("1_igvqa")]
stream = ExtResource("2_ktwuu")

[node name="FillGameLogic" type="Node" parent="."]
script = ExtResource("3_s61i2")
barrels_to_win = 3
metadata/_custom_type_script = "uid://cp54mgi54nywo"

[node name="LevelCompletedAnimation" type="AnimationPlayer" parent="FillGameLogic"]
libraries = {
&"": SubResource("AnimationLibrary_hlahk")
}

[node name="TileMapLayers" type="Node2D" parent="."]

[node name="Foam2" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0, 0, 0, 1)
tile_map_data = PackedByteArray("AAAAAAcABgABAAEAAAABAAYABgABAAEAAAACAAUABgABAAEAAAADAAQABgABAAEAAAAEAAMABgABAAEAAAAFAAIABgABAAEAAAAFAAEABgABAAEAAAAFAAAABgABAAEAAAAEAAAABgABAAEAAAADAAAABgABAAEAAAACAAAABgABAAEAAAABAAAABgABAAEAAAAAAAAABgABAAEAAAAAAAEABgABAAEAAAAAAAIABgABAAEAAAABAAEABgABAAEAAAACAAIABgABAAEAAAADAAEABgABAAEAAAAEAAEABgABAAEAAAAAAAQABgABAAEAAAAGAAUABgABAAEAAAAHAAQABgABAAEAAAAIAAUABgABAAEAAAAJAAYABgABAAEAAAAIAAgABgABAAEAAAAGAAcABgABAAEAAAAGAAgABgABAAEAAAAHAAkABgABAAEAAAAJAAkABgABAAEAAAAKAAkABgABAAEAAAAKAAoABgABAAEAAAAKAAcABgABAAEAAAALAAcABgABAAEAAAAMAAgABgABAAEAAAANAAgABgABAAEAAAAOAAgABgABAAEAAAAPAAkABgABAAEAAAAPAAoABgABAAEAAAAPAAgABgABAAEAAAAQAAgABgABAAEAAAARAAcABgABAAEAAAAQAAYABgABAAEAAAAOAAYABgABAAEAAAAOAAcABgABAAEAAAAOAAUABgABAAEAAAAPAAQABgABAAEAAAAQAAMABgABAAEAAAARAAQABgABAAEAAAARAAUABgABAAEAAAARAAYABgABAAEAAAARAAIABgABAAEAAAAGAAIABgABAAEAAAAHAAIABgABAAEAAAAJAAIABgABAAEAAAAKAAEABgABAAEAAAAKAAAABgABAAEAAAAIAAMABgABAAEAAAAGAAYABgABAAEAAAA=")
tile_set = ExtResource("4_kr32a")

[node name="Lava" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.44313726, 0.28627452, 0.29803923, 1)
tile_map_data = PackedByteArray("AAAHAAcACwABAAEAAAAQAAUACwABAAEAAAAPAAYACwABAAEAAAAQAAcACwABAAEAAAAHAAgADAABAAEAAAAIAAcADAABAAEAAAAJAAgADAABAAEAAAAPAAcADAABAAEAAAARAAMADAABAAEAAAAQAAQADAABAAEAAAAPAAUADAABAAEAAAAHAAUADAABAAEAAAAIAAYADAABAAEAAAAJAAcADAABAAEAAAAKAAgADAABAAEAAAALAAkADAABAAEAAAAMAAkADAABAAEAAAANAAkADAABAAEAAAAOAAkADAABAAEAAAAMAAoADAABAAEAAAAOAAoADAABAAEAAAANAAoADAABAAEAAAALAAgADAABAAEAAAALAAoADAABAAEAAAAAAAYADAABAAEAAAAAAAUADAABAAEAAAABAAUADAABAAEAAAABAAQADAABAAEAAAABAAMADAABAAEAAAACAAMADAABAAEAAAACAAQADAABAAEAAAADAAMADAABAAEAAAADAAIADAABAAEAAAABAAIADAABAAEAAAAAAAMADAABAAEAAAAGAAEADAABAAEAAAAGAAAADAABAAEAAAAHAAAADAABAAEAAAAIAAAADAABAAEAAAAJAAAADAABAAEAAAAIAAEADAABAAEAAAAHAAEADAABAAEAAAAJAAEADAABAAEAAAAEAAIADAABAAEAAAAIAAIADAABAAEAAAAHAAYADAABAAEAAAA=")
tile_set = ExtResource("4_kr32a")

[node name="Grass" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.2901961, 0.44705883, 0.94509804, 1)
tile_map_data = PackedByteArray("AAABAAEAAQABAAIAAAABAAcAAQABAAEAAAABAAgAAQABAAEAAAACAAgAAQABAAEAAAADAAgAAQABAAEAAAADAAcAAQABAAEAAAACAAcAAQABAAEAAAACAAYAAQABAAEAAAACAAEAAQABAAEAAAAEAAcAAQABAAEAAAADAAYAAQABAAEAAAADAAUAAQABAAEAAAADAAEAAQABAAIAAAAEAAEAAQABAAIAAAAFAAEAAQACAAEAAAAKAAEAAQAAAAEAAAALAAEAAQABAAEAAAAGAAIAAQABAAAAAAAGAAMAAQABAAEAAAAGAAQAAQABAAEAAAAGAAUAAQACAAEAAAAGAAYAAQACAAEAAAAGAAcAAQACAAEAAAAGAAgAAQACAAEAAAAIAAQAAQABAAEAAAAIAAMAAQABAAAAAAAHAAIAAQACAAAAAAAHAAMAAQABAAEAAAAHAAQAAQABAAIAAAAFAAgAAQABAAEAAAAEAAgAAQABAAEAAAAFAAcAAQABAAEAAAAFAAYAAQABAAEAAAAFAAUAAQABAAEAAAAFAAQAAQABAAEAAAAFAAMAAQABAAEAAAAEAAYAAQABAAEAAAAEAAUAAQABAAEAAAAEAAQAAQABAAEAAAAEAAMAAQAAAAAAAAABAAAAAQABAAAAAAAAAAAAAQAAAAAAAAAAAAEAAQAAAAEAAAAAAAIAAQADAAIAAAAAAAcAAQAAAAAAAAAAAAgAAQAAAAEAAAACAAAAAQABAAAAAAADAAAAAQABAAAAAAAEAAAAAQABAAAAAAAFAAAAAQACAAAAAAAKAAAAAQAAAAAAAAALAAAAAQABAAAAAAAMAAAAAQABAAAAAAANAAAAAQABAAAAAAAKAAUAAQABAAEAAAALAAUAAQABAAEAAAAMAAUAAQABAAEAAAANAAUAAQABAAEAAAANAAQAAQABAAEAAAANAAMAAQABAAEAAAANAAIAAQABAAEAAAANAAEAAQABAAEAAAAMAAEAAQABAAEAAAAMAAIAAQABAAEAAAAMAAMAAQABAAEAAAAMAAQAAQABAAEAAAALAAQAAQABAAEAAAAKAAQAAQABAAEAAAAJAAIAAQAAAAAAAAAJAAMAAQABAAEAAAAJAAQAAQABAAEAAAANAAgAAQABAAIAAAANAAcAAQABAAEAAAANAAYAAQABAAEAAAAMAAcAAQABAAEAAAAMAAYAAQABAAEAAAALAAcAAQABAAIAAAALAAYAAQABAAEAAAALAAMAAQABAAEAAAALAAIAAQABAAEAAAAKAAIAAQABAAEAAAAKAAYAAQABAAEAAAAKAAMAAQABAAEAAAAAAAkAAQAAAAEAAAAAAAoAAQAAAAIAAAABAAoAAQABAAIAAAACAAoAAQABAAIAAAADAAoAAQABAAIAAAAEAAoAAQABAAIAAAAFAAoAAQABAAIAAAAGAAoAAQABAAIAAAAHAAoAAQABAAIAAAAIAAoAAQABAAIAAAAJAAoAAQABAAIAAAAKAAoAAQACAAIAAAAPAAoAAQAAAAIAAAAQAAoAAQABAAIAAAARAAoAAQACAAIAAAARAAkAAQACAAEAAAARAAgAAQACAAEAAAARAAcAAQADAAEAAAARAAYAAQACAAEAAAARAAUAAQADAAEAAAARAAIAAQACAAIAAAARAAEAAQACAAEAAAARAAAAAQACAAAAAAAQAAAAAQABAAAAAAAPAAAAAQABAAAAAAAOAAAAAQABAAAAAAAOAAEAAQABAAEAAAAPAAEAAQABAAEAAAAQAAEAAQABAAEAAAAQAAIAAQABAAEAAAAOAAIAAQABAAEAAAAOAAMAAQABAAEAAAAOAAQAAQABAAEAAAAOAAUAAQACAAEAAAAOAAgAAQABAAIAAAAPAAkAAQAAAAEAAAAKAAkAAQACAAAAAAAJAAkAAQABAAAAAAAIAAkAAQABAAEAAAAHAAkAAQABAAAAAAAGAAkAAQABAAEAAAAFAAkAAQABAAEAAAAEAAkAAQABAAEAAAADAAkAAQABAAEAAAACAAkAAQABAAEAAAABAAkAAQABAAEAAAAQAAkAAQABAAEAAAAQAAgAAQABAAAAAAAQAAYAAQAAAAMAAAAPAAgAAQABAAAAAAAPAAQAAQACAAIAAAAPAAMAAQABAAEAAAAPAAIAAQABAAEAAAACAAIAAQADAAIAAAAIAAgAAQADAAAAAAAAAAQAAQACAAMAAAABAAYAAQAAAAAAAAACAAUAAQAAAAAAAAADAAQAAQAAAAAAAAAMAAgAAQAAAAIAAAAIAAUAAQAAAAIAAAAJAAUAAQABAAEAAAAJAAYAAQAAAAIAAAAKAAcAAQAAAAIAAAAQAAMAAQACAAIAAAAOAAYAAQACAAEAAAAOAAcAAQACAAEAAAARAAQAAQADAAAAAAAFAAIAAQAAAAEAAAA=")
tile_set = ExtResource("4_kr32a")

[node name="Foam" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.3529412, 0.17254902, 0.7019608, 1)
tile_map_data = PackedByteArray("AAAEAAMAAgABAAIAAAAAAAMAAgABAAIAAAAFAAIAAgACAAEAAAABAAQAAgACAAEAAAAAAAUAAgABAAIAAAAEAAEAAgABAAAAAAAEAAIAAgABAAIAAAADAAEAAgABAAAAAAADAAIAAgABAAIAAAABAAEAAgABAAAAAAACAAMAAgABAAIAAAABAAIAAgAAAAEAAAAHAAIAAgABAAIAAAAHAAEAAgABAAAAAAAIAAMAAgABAAIAAAAIAAIAAgABAAAAAAAJAAIAAgABAAIAAAAJAAEAAgABAAAAAAAHAAUAAgACAAEAAAAIAAUAAgABAAAAAAAIAAYAAgABAAIAAAAJAAYAAgABAAAAAAAJAAcAAgABAAIAAAAKAAcAAgABAAAAAAAKAAgAAgABAAIAAAALAAgAAgABAAIAAAAMAAgAAgABAAAAAAAMAAkAAgABAAIAAAANAAgAAgABAAAAAAANAAkAAgABAAIAAAAOAAgAAgABAAAAAAAOAAkAAgABAAIAAAALAAcAAgABAAAAAAAGAAcAAgAAAAEAAAAHAAcAAgACAAEAAAAGAAgAAgAAAAEAAAAHAAgAAgACAAEAAAAJAAgAAgACAAEAAAAIAAcAAgABAAAAAAAAAAYAAgAAAAEAAAACAAUAAgACAAEAAAABAAUAAgAAAAEAAAADAAQAAgACAAEAAAACAAQAAgAAAAEAAAADAAMAAgAAAAEAAAAAAAIAAgABAAAAAAABAAYAAgACAAEAAAAQAAcAAgABAAIAAAAPAAYAAgAAAAEAAAAQAAUAAgABAAAAAAAOAAcAAgAAAAEAAAAPAAcAAgACAAEAAAAOAAYAAgAAAAEAAAAOAAUAAgAAAAEAAAAPAAUAAgACAAEAAAAPAAQAAgAAAAEAAAAQAAQAAgACAAEAAAAQAAMAAgAAAAEAAAARAAMAAgACAAEAAAAGAAEAAgABAAAAAAAGAAIAAgABAAIAAAAGAAYAAgAAAAEAAAAHAAYAAgACAAEAAAAGAAUAAgAAAAEAAAA=")
tile_set = ExtResource("4_kr32a")

[node name="Bush" parent="TileMapLayers" instance=ExtResource("5_r7kal")]
position = Vector2(299, 577)
sprite_frames = ExtResource("6_2o143")

[node name="Bush2" parent="TileMapLayers" instance=ExtResource("5_r7kal")]
position = Vector2(691, 184)
sprite_frames = ExtResource("6_2o143")

[node name="Bush3" parent="TileMapLayers" instance=ExtResource("5_r7kal")]
position = Vector2(1070, 586)
sprite_frames = ExtResource("6_2o143")

[node name="Bush4" parent="TileMapLayers" instance=ExtResource("7_0ow6i")]
position = Vector2(1091, 169)
sprite_frames = ExtResource("6_2o143")

[node name="Stones" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.5686275, 0.4392157, 0.95686275, 1)
tile_map_data = PackedByteArray("AAAAAAcABAADAAAAAAAAAAEABAADAAIAAAAAAAgABAADAAEAAAABAAAABAABAAQAAAACAAAABAABAAQAAAADAAAABAABAAQAAAAEAAAABAABAAQAAAAFAAAABAABAAQAAAAKAAAABAAAAAQAAAALAAAABAABAAAAAAAMAAAABAABAAAAAAANAAAABAABAAQAAAAOAAAABAACAAQAAAACAAEABAABAAMAAAADAAEABAABAAMAAAAEAAEABAABAAMAAAAFAAEABAACAAMAAAAOAAEABAACAAMAAAAAAAAABAAAAAAAAAABAAEABAABAAMAAAALAAEABAAAAAEAAAALAAIABAADAAIAAAAMAAQABAADAAMAAAAMAAMABAADAAIAAAAMAAIABAADAAEAAAAMAAEABAACAAEAAAAAAAkABAAAAAIAAAADAAkABAAAAAQAAAAEAAkABAABAAQAAAAFAAkABAABAAQAAAAGAAkABAABAAQAAAAHAAkABAABAAQAAAAIAAkABAABAAQAAAAJAAkABAABAAQAAAAKAAkABAACAAQAAAAPAAkABAAAAAQAAAAQAAkABAABAAQAAAARAAkABAACAAIAAAARAAgABAADAAEAAAARAAcABAADAAEAAAARAAYABAADAAEAAAARAAUABAADAAAAAAARAAIABAADAAMAAAARAAEABAADAAIAAAARAAAABAACAAAAAAAQAAAABAAAAAQAAAAQAAEABAAAAAMAAAADAAoABAAAAAMAAAAEAAoABAABAAMAAAAFAAoABAABAAMAAAAGAAoABAABAAMAAAAHAAoABAABAAMAAAAIAAoABAABAAMAAAAJAAoABAABAAMAAAAKAAoABAACAAMAAAAPAAoABAAAAAMAAAAQAAoABAABAAMAAAARAAoABAACAAMAAAAAAAoABAAAAAMAAAABAAoABAACAAMAAAABAAkABAACAAQAAAAKAAEABAAAAAMAAAANAAEABAABAAMAAAAAAAIABAADAAMAAAALAAMABAADAAMAAAA=")
tile_set = ExtResource("4_kr32a")

[node name="OnTheGround" type="Node2D" parent="."]
y_sort_enabled = true

[node name="LevelExit" type="Node2D" parent="OnTheGround"]
y_sort_enabled = true
position = Vector2(993, 31)

[node name="Door Exit" parent="OnTheGround/LevelExit" instance=ExtResource("6_tm1ho")]
position = Vector2(0, 82)
play_victory_fanfare_on_open = true

[node name="Teleporter" type="Area2D" parent="OnTheGround/LevelExit"]
position = Vector2(0, -25)
collision_layer = 4
script = ExtResource("7_odyqf")
next_scene = "uid://c2rc2y662wko0"
enter_transition = 4
exit_transition = 5
metadata/_custom_type_script = "uid://hqdquinbimce"

[node name="CollisionShape2D" type="CollisionShape2D" parent="OnTheGround/LevelExit/Teleporter"]
position = Vector2(-1.5, -9.5)
shape = SubResource("RectangleShape2D_e81yh")

[node name="Player" parent="OnTheGround" instance=ExtResource("8_fhg3o")]
position = Vector2(162, 615)
player_name = "StoryWeaver"
sprite_frames = ExtResource("11_rqh7d")

[node name="Camera2D" type="Camera2D" parent="OnTheGround/Player"]
position = Vector2(139, -185)
zoom = Vector2(1.333, 1.333)
limit_left = 0
limit_top = 0
limit_right = 1158
limit_bottom = 700
position_smoothing_enabled = true
editor_draw_limits = true

[node name="ThrowingEnemy" parent="OnTheGround" instance=ExtResource("10_krssa")]
position = Vector2(154, 175)
autostart = true
sprite_frames = ExtResource("13_xuftb")
projectile_sprite_frames = ExtResource("16_wnsuw")

[node name="ThrowingEnemy2" parent="OnTheGround" instance=ExtResource("10_krssa")]
position = Vector2(536, 558)
autostart = true
sprite_frames = ExtResource("13_xuftb")
projectile_sprite_frames = ExtResource("16_wnsuw")

[node name="ThrowingEnemy3" parent="OnTheGround" instance=ExtResource("10_krssa")]
position = Vector2(1053, 435)
autostart = true
sprite_frames = ExtResource("13_xuftb")
projectile_sprite_frames = ExtResource("16_wnsuw")

[node name="FillingBarrel" parent="OnTheGround" instance=ExtResource("20_10usg")]
position = Vector2(31, 298)
sprite_frames = ExtResource("18_cbawa")
label = "Negacion"
color = Color(0.17254902, 0.7254902, 0.011764706, 1)

[node name="FillingBarrel2" parent="OnTheGround" instance=ExtResource("20_10usg")]
position = Vector2(743, 289)
sprite_frames = ExtResource("18_cbawa")
label = "Negacion"
color = Color(0.17254902, 0.7254902, 0.011764706, 1)

[node name="FillingBarrel3" parent="OnTheGround" instance=ExtResource("20_10usg")]
position = Vector2(1120, 302)
sprite_frames = ExtResource("18_cbawa")
label = "Negacion"
color = Color(0.17254902, 0.7254902, 0.011764706, 1)

[node name="Door Enter" parent="OnTheGround" instance=ExtResource("6_tm1ho")]
position = Vector2(159, 697)

[node name="ScreenOverlay" type="CanvasLayer" parent="."]

[node name="HUD" parent="." instance=ExtResource("21_4r1d0")]

[connection signal="goal_reached" from="FillGameLogic" to="FillGameLogic/LevelCompletedAnimation" method="play" binds= ["goal_completed"]]
