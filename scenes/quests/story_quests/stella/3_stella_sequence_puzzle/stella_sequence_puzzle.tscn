[gd_scene load_steps=20 format=4 uid="uid://b7j5em2h1m2j7"]

[ext_resource type="TileSet" uid="uid://oynx002hv8tl" path="res://tiles/water.tres" id="1_koksn"]
[ext_resource type="TileSet" uid="uid://b8qnr0owsbhhn" path="res://tiles/exterior_floors.tres" id="2_g4uwj"]
[ext_resource type="PackedScene" uid="uid://iu2q66clupc6" path="res://scenes/game_elements/characters/player/player.tscn" id="2_sl1lr"]
[ext_resource type="Script" uid="uid://c68oh8dtr21ti" path="res://scenes/game_logic/sequence_puzzle.gd" id="3_an7xq"]
[ext_resource type="SpriteFrames" uid="uid://dn0ivusgamrg3" path="res://scenes/quests/story_quests/stella/stella_player_components/stella_player.tres" id="3_r0gok"]
[ext_resource type="PackedScene" uid="uid://be4o3ythda4cu" path="res://scenes/game_elements/props/sequence_puzzle_hint_sign/sequence_puzzle_hint_sign.tscn" id="11_c8urv"]
[ext_resource type="Script" uid="uid://ccc78coj2b1li" path="res://scenes/game_logic/sequence_puzzle_step.gd" id="13_cyoxr"]
[ext_resource type="PackedScene" uid="uid://fuhl3l6gxq5k" path="res://scenes/game_elements/props/collectible_item/collectible_item.tscn" id="14_edmpl"]
[ext_resource type="Script" uid="uid://bgmwplmj3bfls" path="res://scenes/globals/game_state/inventory/inventory_item.gd" id="15_2p35u"]
[ext_resource type="PackedScene" uid="uid://cfcgrfvtn04yp" path="res://scenes/ui_elements/hud/hud.tscn" id="18_w255e"]
[ext_resource type="PackedScene" uid="uid://ipvcfv2g0oi1" path="res://scenes/game_elements/characters/npcs/talker/talker.tscn" id="19_iwkby"]
[ext_resource type="Script" uid="uid://x1mxt6bmei2o" path="res://scenes/ui_elements/cinematic/cinematic.gd" id="19_mt5a1"]
[ext_resource type="SpriteFrames" uid="uid://c8xb6t6eq3xn5" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_guardian.tres" id="20_tvr0v"]
[ext_resource type="SpriteFrames" uid="uid://hc634wlsdm4p" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_hint_rock.tres" id="22_koksn"]
[ext_resource type="Resource" uid="uid://chajuw8jt4mm8" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_guardian.dialogue" id="29_g4uwj"]
[ext_resource type="PackedScene" uid="uid://cml3bcuq3vmeh" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_tortoise.tscn" id="31_g4uwj"]
[ext_resource type="SpriteFrames" uid="uid://2ek86nvw6y28" path="res://scenes/game_elements/props/tree/components/tree_spriteframes_yellow.tres" id="31_xd6u5"]
[ext_resource type="PackedScene" uid="uid://7873qa54birk" path="res://scenes/game_elements/props/tree/tree.tscn" id="32_7w21t"]
[ext_resource type="Resource" uid="uid://wpifv4dfofm2" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_sequence_puzzle.dialogue" id="33_g4uwj"]

[sub_resource type="Resource" id="Resource_u8qfb"]
script = ExtResource("15_2p35u")
type = 2
metadata/_custom_type_script = "uid://bgmwplmj3bfls"

[node name="SequencePuzzleTemplate" type="Node2D"]

[node name="TileMapLayers" type="Node2D" parent="."]

[node name="Water_Level1" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.417257, 0.417257, 0.417257, 1)
tile_map_data = PackedByteArray("AAD/////AAAAAAAAAAD//wAAAAAAAAAAAAD//wEAAAAAAAAAAAD//wIAAAAAAAAAAAD//wMAAAAAAAAAAAD//wQAAAAAAAAAAAAAAP//AAAAAAAAAAABAP//AAAAAAAAAAACAP//AAAAAAAAAAADAP//AAAAAAAAAAAEAP//AAAAAAAAAAAFAP//AAAAAAAAAAAGAP//AAAAAAAAAAAHAP//AAAAAAAAAAAIAP//AAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAPAP//AAAAAAAAAAAOAP//AAAAAAAAAAANAP//AAAAAAAAAAAMAP//AAAAAAAAAAALAP//AAAAAAAAAAAKAP//AAAAAAAAAAAJAP//AAAAAAAAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAUAAAAAAAAAAAAPAAYAAAAAAAAAAAAPAAcAAAAAAAAAAAAPAAgAAAAAAAAAAAAOAAgAAAAAAAAAAAANAAgAAAAAAAAAAAAMAAgAAAAAAAAAAAALAAgAAAAAAAAAAAAKAAgAAAAAAAAAAAAJAAgAAAAAAAAAAAAIAAgAAAAAAAAAAAAHAAgAAAAAAAAAAAAAAAgAAAAAAAAAAAD//wgAAAAAAAAAAAD//wcAAAAAAAAAAAD//wYAAAAAAAAAAAD//wUAAAAAAAAAAAABAAgAAAAAAAAAAAACAAgAAAAAAAAAAAADAAgAAAAAAAAAAAAEAAgAAAAAAAAAAAAFAAgAAAAAAAAAAAAGAAgAAAAAAAAAAAA=")
tile_set = ExtResource("1_koksn")

[node name="Sand_Level1" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.417257, 0.417257, 0.417257, 1)
tile_map_data = PackedByteArray("AAD//wcAAQAGAAEAAAAAAAcAAQAGAAEAAAABAAcAAQAGAAEAAAACAAcAAQAGAAEAAAADAAcAAQAGAAEAAAADAAYAAQAGAAEAAAADAAUAAQAGAAEAAAAEAAUAAQAGAAEAAAAFAAUAAQAGAAEAAAAGAAUAAQAGAAEAAAAHAAUAAQAGAAEAAAAIAAUAAQAGAAEAAAAJAAUAAQAGAAEAAAAKAAUAAQAGAAEAAAALAAUAAQAGAAEAAAALAAQAAQAGAAEAAAAMAAQAAQAGAAEAAAANAAQAAQAGAAEAAAAOAAQAAQAGAAEAAAAPAAQAAQAHAAEAAAD//wAAAQAGAAEAAAAAAAAAAQAGAAEAAAABAAAAAQAGAAEAAAACAAAAAQAGAAEAAAADAAAAAQAGAAEAAAAEAAAAAQAGAAEAAAAFAAAAAQAGAAEAAAAFAAEAAQAGAAEAAAAEAAEAAQAGAAEAAAAAAAEAAQAGAAEAAAD//wEAAQAGAAEAAAD//wIAAQAGAAEAAAD//wQAAQAGAAEAAAD//wUAAQAGAAEAAAD//wYAAQAGAAEAAAAAAAYAAQAGAAEAAAABAAYAAQAGAAEAAAACAAYAAQAGAAEAAAACAAUAAQAGAAEAAAACAAQAAQAGAAEAAAABAAQAAQAGAAEAAAABAAUAAQAGAAEAAAAAAAUAAQAGAAEAAAAAAAQAAQAGAAEAAAAAAAIAAQAGAAEAAAACAAMAAQAGAAEAAAACAAIAAQAGAAEAAAADAAIAAQAGAAEAAAADAAMAAQAGAAEAAAADAAQAAQAGAAEAAAAEAAQAAQAGAAEAAAAEAAMAAQAGAAEAAAAEAAIAAQAGAAEAAAAFAAIAAQAGAAEAAAAFAAMAAQAGAAEAAAAFAAQAAQAGAAEAAAAGAAQAAQAGAAEAAAAHAAQAAQAGAAEAAAAHAAMAAQAGAAEAAAAGAAMAAQAGAAEAAAAGAAIAAQAGAAEAAAAGAAEAAQAGAAEAAAAGAAAAAQAGAAEAAAAHAAAAAQAGAAEAAAAIAAAAAQAGAAEAAAAJAAAAAQAGAAEAAAAIAAEAAQAGAAEAAAAIAAIAAQAGAAEAAAAHAAIAAQAGAAEAAAAHAAEAAQAGAAEAAAAJAAEAAQAGAAEAAAAJAAIAAQAGAAEAAAAJAAMAAQAGAAEAAAAIAAMAAQAGAAEAAAAIAAQAAQAGAAEAAAAJAAQAAQAGAAEAAAAKAAQAAQAGAAEAAAALAAMAAQAGAAEAAAALAAIAAQAGAAEAAAALAAEAAQAGAAEAAAAKAAIAAQAGAAEAAAAKAAMAAQAGAAEAAAAKAAEAAQAGAAEAAAAKAAAAAQAGAAEAAAALAAAAAQAGAAEAAAAMAAAAAQAGAAEAAAANAAAAAQAGAAEAAAANAAEAAQAGAAEAAAAMAAEAAQAGAAEAAAAMAAIAAQAGAAEAAAAMAAMAAQAGAAEAAAANAAMAAQAGAAEAAAAOAAMAAQAGAAEAAAAPAAMAAQAHAAEAAAAPAAIAAQAHAAEAAAAOAAIAAQAGAAEAAAAOAAEAAQAGAAEAAAANAAIAAQAGAAEAAAAOAAAAAQAGAAEAAAAPAAAAAQAHAAEAAAAPAAEAAQAHAAEAAAD+////AQAFAAAAAAD/////AQAGAAAAAAABAP//AQAGAAAAAAACAP//AQAGAAAAAAAAAP//AQAGAAAAAAD+/wAAAQAFAAEAAAD+/wEAAQAFAAEAAAD+/wIAAQAFAAEAAAD+/wQAAQAFAAEAAAD+/wUAAQAFAAEAAAD+/wYAAQAFAAEAAAD+/wcAAQAFAAEAAAD//wgAAQAGAAIAAAD+/wgAAQAFAAIAAAAAAAgAAQAGAAIAAAABAAgAAQAGAAIAAAACAAgAAQAGAAIAAAADAAgAAQAGAAIAAAAEAAgAAQAGAAIAAAAFAAgAAQAGAAIAAAAGAAgAAQAGAAIAAAAHAAgAAQAGAAIAAAAIAAgAAQAGAAIAAAAJAAgAAQAGAAIAAAAKAAgAAQAGAAIAAAALAAgAAQAGAAIAAAAMAAgAAQAGAAIAAAANAAgAAQAGAAIAAAAOAAgAAQAGAAIAAAAOAAcAAQAGAAEAAAAOAAYAAQAGAAEAAAAOAAUAAQAGAAEAAAAPAAUAAQAHAAEAAAAPAAYAAQAHAAEAAAAPAAcAAQAHAAEAAAAPAAgAAQAHAAIAAAAEAAcAAQAGAAEAAAAEAAYAAQAGAAEAAAAFAAYAAQAGAAEAAAAFAAcAAQAGAAEAAAAGAAYAAQAGAAEAAAAGAAcAAQAGAAEAAAAHAAYAAQAGAAEAAAAHAAcAAQAGAAEAAAAIAAYAAQAGAAEAAAAIAAcAAQAGAAEAAAAJAAYAAQAGAAEAAAAJAAcAAQAGAAEAAAAKAAYAAQAGAAEAAAAKAAcAAQAGAAEAAAALAAYAAQAGAAEAAAALAAcAAQAGAAEAAAAMAAYAAQAGAAEAAAAMAAUAAQAGAAEAAAAMAAcAAQAGAAEAAAANAAcAAQAGAAEAAAANAAYAAQAGAAEAAAANAAUAAQAGAAEAAAADAP//AQAGAAAAAAAEAP//AQAGAAAAAAAFAP//AQAGAAAAAAAGAP//AQAGAAAAAAAHAP//AQAGAAAAAAAIAP//AQAGAAAAAAAJAP//AQAGAAAAAAAKAP//AQAGAAAAAAALAP//AQAGAAAAAAAMAP//AQAGAAAAAAANAP//AQAGAAAAAAAOAP//AQAGAAAAAAAPAP//AQAHAAAAAAD+/wMAAQAFAAEAAAD//wMAAQAGAAEAAAAAAAMAAQAGAAEAAAABAAMAAQAGAAEAAAABAAIAAQAGAAEAAAABAAEAAQAGAAEAAAACAAEAAQAGAAEAAAADAAEAAQAGAAEAAAA=")
tile_set = ExtResource("2_g4uwj")

[node name="Paths_Leve1" type="TileMapLayer" parent="TileMapLayers"]
modulate = Color(0.4, 0.4, 0.4, 1)
tile_map_data = PackedByteArray("AAAEAAIABgABAAAAAAAFAAIABgABAAAAAAAGAAIABgABAAAAAAAHAAIABgACAAAAAAAEAAMABgABAAEAAAADAAMABgABAAEAAAACAAMABgABAAEAAAABAAMABgABAAEAAAAAAAMABgABAAIAAAABAAUABgAAAAEAAAABAAQABgAAAAEAAAACAAUABgABAAEAAAACAAQABgABAAEAAAADAAQABgABAAEAAAADAAUABgABAAEAAAAEAAUABgACAAEAAAAEAAQABgACAAEAAAAEAAYABgABAAEAAAAEAAcABgACAAEAAAAEAAgABgACAAIAAAADAAgABgABAAIAAAACAAgABgABAAIAAAABAAgABgAAAAIAAAABAAcABgAAAAEAAAABAAYABgAAAAEAAAACAAYABgABAAEAAAACAAcABgABAAEAAAADAAcABgABAAEAAAADAAYABgABAAEAAAAFAAYABgABAAMAAAAGAAYABgABAAMAAAAHAAYABgABAAMAAAAIAAYABgABAAIAAAAJAAYABgABAAMAAAAKAAUABgADAAEAAAAMAAQABgADAAEAAAAFAAMABgABAAIAAAAGAAMABgABAAIAAAAHAAMABgACAAIAAAADAAEABgADAAEAAAADAAAABgADAAEAAAADAP//BgADAAAAAAAKAAYABgABAAIAAAAMAAUABgADAAEAAAANAAYABgACAAAAAAANAAcABgACAAIAAAAMAAcABgAAAAIAAAALAAYABgABAAMAAAAMAAYABgABAAEAAAADAAIABgABAAEAAAAIAAUABgADAAAAAAAKAAQABgADAAAAAAAMAAMABgADAAAAAAD//wMABgAAAAIAAAD//wIABgAAAAAAAAAAAAIABgABAAAAAAABAAIABgABAAAAAAACAAIABgABAAAAAAA=")
tile_set = ExtResource("2_g4uwj")

[node name="OnTheGround" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Player" parent="OnTheGround" instance=ExtResource("2_sl1lr")]
position = Vector2(227, 75)
sprite_frames = ExtResource("3_r0gok")

[node name="SequencePuzzle" type="Node2D" parent="OnTheGround"]
y_sort_enabled = true
position = Vector2(-1, 0)
script = ExtResource("3_an7xq")
metadata/_custom_type_script = "uid://c68oh8dtr21ti"

[node name="Tortoise" parent="OnTheGround/SequencePuzzle" instance=ExtResource("31_g4uwj")]
position = Vector2(191, 379)

[node name="Signs" type="Node2D" parent="OnTheGround/SequencePuzzle"]
y_sort_enabled = true

[node name="HintSign1" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_c8urv")]
position = Vector2(545, 361)
sprite_frames = ExtResource("22_koksn")

[node name="HintSign2" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_c8urv")]
position = Vector2(673, 295)
sprite_frames = ExtResource("22_koksn")

[node name="HintSign3" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_c8urv")]
position = Vector2(804, 234)
sprite_frames = ExtResource("22_koksn")

[node name="Steps" type="Node2D" parent="OnTheGround/SequencePuzzle"]

[node name="SequencePuzzleStep1" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_cyoxr")
sequence = [NodePath("../../Tortoise/Gem 2"), NodePath("../../Tortoise/Gem 4"), NodePath("../../Tortoise/Gem 6")]
hint_sign = NodePath("../../Signs/HintSign1")

[node name="SequencePuzzleStep2" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_cyoxr")
sequence = [NodePath("../../Tortoise/Gem 2"), NodePath("../../Tortoise/Gem 4"), NodePath("../../Tortoise/Gem 6"), NodePath("../../Tortoise/Gem 5"), NodePath("../../Tortoise/Gem 3"), NodePath("../../Tortoise/Gem 1")]
hint_sign = NodePath("../../Signs/HintSign2")

[node name="SequencePuzzleStep3" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_cyoxr")
sequence = [NodePath("../../Tortoise/Gem 2"), NodePath("../../Tortoise/Gem 4"), NodePath("../../Tortoise/Gem 6"), NodePath("../../Tortoise/Gem 5"), NodePath("../../Tortoise/Gem 3"), NodePath("../../Tortoise/Gem 1"), NodePath("../../Tortoise/Gem 2"), NodePath("../../Tortoise/Gem 2"), NodePath("../../Tortoise/Gem 1"), NodePath("../../Tortoise/Gem 2")]
hint_sign = NodePath("../../Signs/HintSign3")

[node name="CollectibleItem" parent="OnTheGround" instance=ExtResource("14_edmpl")]
position = Vector2(831, 462)
revealed = false
next_scene = "uid://dd8wip76jpadr"
item = SubResource("Resource_u8qfb")
collected_dialogue = ExtResource("33_g4uwj")
dialogue_title = &"well_done"

[node name="Guardian" parent="OnTheGround" instance=ExtResource("19_iwkby")]
position = Vector2(442, 179)
scale = Vector2(1.5, 1.5)
dialogue = ExtResource("29_g4uwj")
sprite_frames = ExtResource("20_tvr0v")

[node name="Tree" parent="OnTheGround" instance=ExtResource("32_7w21t")]
position = Vector2(69, 196)
scale = Vector2(1.2, 1.095)
sprite_frames = ExtResource("31_xd6u5")

[node name="ScreenOverlay" type="CanvasLayer" parent="."]

[node name="HUD" parent="." instance=ExtResource("18_w255e")]

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
zoom = Vector2(1.333, 1.333)
position_smoothing_enabled = true

[node name="Cinematic" type="Node2D" parent="."]
script = ExtResource("19_mt5a1")
dialogue = ExtResource("33_g4uwj")
metadata/_custom_type_script = "uid://x1mxt6bmei2o"

[connection signal="solved" from="OnTheGround/SequencePuzzle" to="OnTheGround/CollectibleItem" method="reveal"]
